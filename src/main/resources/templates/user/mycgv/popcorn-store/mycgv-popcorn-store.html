<!DOCTYPE html>
<html lang="ko"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org/">
<head>
    <title>mycgv-popcorn-store</title>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta http-equiv="Expires" content="-1" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="No-Cache" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta name="viewport" content="width=1024" />
    <meta name="keywords" content="CGV, 시지브이, 영화관, 극장, 영화, 티켓, 박스오피스, 극장, Movie, Theater, Cinema, Cgv, cgv, 예매, 상영작" />
    <meta name="description" content="CGV는 선진화된 관람문화와 최고의 서비스로 고객에게 잊을 수 없는 감동을 선사합니다. CGV홈페이지를 통해 영화 예매뿐만 아니라 그 이상의 서비스와 감동을 전달하고, 다양한 즐거움과 특별한 경험을 제공하고자 합니다." />
    <meta property="og:site_name" content="영화 그 이상의 감동. CGV"/>
    <meta id="ctl00_ctl00_og_title" property="og:title" content="영화 그 이상의 감동. CGV"></meta>


    <meta id="ctl00_ctl00_og_image" property="og:image" content="https://img.cgv.co.kr/WebApp/images/common/logo_new_kakao_prevw.png"></meta>
    <link rel="alternate" href="http://m.cgv.co.kr" />
    <link rel="shortcut icon" href="https://img.cgv.co.kr/theater_img/favicon.ico" type="image/x-icon" />
    <title id="ctl00_ctl00_headerTitle"></title>
    <link rel="shortcut icon" type="image/x-icon" href="https://img.cgv.co.kr/R2014/images/favicon.ico" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/webfont.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/reset.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/layout.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/module.css?20211209" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/content.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/common.css" />

    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/eggupdate.css" />
    <link rel="stylesheet" media="print" type="text/css" href="https://img.cgv.co.kr/R2014/css/print.css" />
    <link rel="stylesheet" type="text/css" href="https://img.cgv.co.kr/R2014/js/jquery.ui/smoothness/jquery-ui-1.10.4.custom.min.css" />

    <script type="text/javascript" src="/common/js/extraTheaters.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/app.config.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.tmpl.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.validate.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.paging.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.ui/jquery-ui-1.10.4.custom.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.utils.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/app.utils.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.utils.pageing.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/app.init.js"></script>

    <!--[if lte IE 9]><script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.placeholder.js"></script><![endif]-->
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.dotdotdot.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/silverlight_link.js"></script>
    <script src="https://img.cgv.co.kr/R2014/js/slick/slick.js" type="text/javascript" charset="utf-8"></script>

    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/phototicket/phototicket.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/slick.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/slick-theme-custom.css" />

    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/icheck/login.timer.js"></script>
    <script src="https://img.cgv.co.kr/R2014/js/icheck/icheck.min.js" type="text/javascript" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="https://img.cgv.co.kr/R2014/js/icheck/iCheck.css" />
    <script type="text/javascript">
        $(document).ready(function(){
            $("#store").addClass("on")
        });
    </script>
    <!-- 2020.05.07 감정지수/프리에그 프로젝트 추가 -->
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/preegg.css" />

    <!-- 각페이지 Header Start-->

    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/phototicket/phototicket.css" />
    <!--통합결제-->
    <link rel="stylesheet" type="text/css" href="https://img.cgv.co.kr/R2014/css/mypagenew.css" />

    <!--/각페이지 Header End-->
    <script type="text/javascript">
        //<![CDATA[
        _TRK_CP = "/홈";

        app.config('staticDomain', 'https://img.cgv.co.kr/R2014/')
            .config('imageDomain', 'https://img.cgv.co.kr')
            .config('isLogin', 'True');


        // AD FLOAT
        // 암호화 할 문자열과 키값(상수값)을 매개변수로 받는다.
        function EncryptAD(str, key) {
            output = new String;
            Temp = new Array();
            TextSize = str.length;
            for (i = 0; i < TextSize; i++) {
                // key 값을 원하는 대로 연산을 한다
                output += String.fromCharCode(str.charCodeAt(i) + parseInt(key) + 123 + i);
            }
            return output;
        }
        // 복호화
        // 암호화 된 문자열과 키값(상수값)을 매개변수로 받는다.
        function DecryptAD(str, key) {
            output = new String;
            Temp = new Array();
            TextSize = str.length;
            for (i = 0; i < TextSize; i++) {
                // 암호화시 사용한 연산과 같아야 한다.
                output += String.fromCharCode(str.charCodeAt(i) - (parseInt(key) + 123 + i));
            }

            return output;
        }

        function getCookieVal(offset) {
            var endstr = document.cookie.indexOf(";", offset);
            if (endstr == -1) endstr = document.cookie.length;
            return unescape(document.cookie.substring(offset, endstr));
        }
        function GetCookieAd(name) {
            var arg = name + "=";
            var alen = arg.length;
            var clen = document.cookie.length;
            var i = 0;
            while (i < clen) { //while open
                var j = i + alen;
                if (document.cookie.substring(i, j) == arg)
                    return getCookieVal(j);
                i = document.cookie.indexOf(" ", i) + 1;
                if (i == 0) break;
            } //while close
            return null;
        }
        function setCookieAD(name, value, expiredays) {
            var todayDate = new Date();
            todayDate.setTime(todayDate.getTime() + (expiredays * 24 * 60 * 60 * 1000));
            document.cookie = name + "=" + escape(value) + "; expires=" + todayDate.toGMTString() + "; path=/; domain=cgv.co.kr";
        }
        function CloseAD() {
            var AdUrl = window.location.href;
            var ArrAdUrl = AdUrl.split("/");

            var CurCookieName = 'CgvPopAd-' + ArrAdUrl[3];
            var CurCookieUrl = GetCookieAd(CurCookieName);
            var CookieUrl = ArrAdUrl[3];

            CookieUrl = EncryptAD(CookieUrl, "15442280");
            setCookieAD(CurCookieName, CookieUrl, '1');
            $(document).find('#ad_float1').hide();
        }
        function OpenAD() {
            var AdUrl = window.location.href;
            var ArrAdUrl = AdUrl.split("/");
            var CookieUrl = ArrAdUrl[3];
            var CurCookieName = 'CgvPopAd-' + ArrAdUrl[3];
            var CurCookieUrl = GetCookieAd(CurCookieName);

            if (CurCookieUrl == null) {
                CurCookieUrl = "";
            }
            else {
                CurCookieUrl = DecryptAD(CurCookieUrl, "15442280");
            }

            if (CurCookieUrl.indexOf(CookieUrl) != -1) {
                $(document).find('#ad_float1').hide();
            }

            //section.cgv.co.kr 매거진 체크
            var magazineckurl = GetCookieAd("CgvPopAd-magazine");
            if (magazineckurl != null) {
                var magazineck = DecryptAD(magazineckurl, "15442280");
                if (magazineck != null && magazineck == "magazine") {
                    //값이있는경우 표시하지않음
                    $(document).find('#ad_float1').hide();
                }
            }
        }



        //]]>
    </script>

</head>
<body class="">

<div th:replace="user/fragment/header :: header-user"></div>

<!-- Contaniner -->
<div id="contaniner"  class=""><!-- 벽돌 배경이미지 사용 시 class="bg-bricks" 적용 / 배경이미지가 없을 경우 class 삭제  -->

    <!-- Contents Area -->
    <div id="contents" class="">
        <!-- Contents Start -->

        <!--상단 쪽 common Erea-->
        <div th:replace="user/mycgv/fragment/common :: common-user"></div>
        <!-- 상단 common Erea 끝-->

        <div class="cols-content" id="menu">
            <div th:replace="user/mycgv/fragment/nav :: nav-user"></div>

                <div class="col-detail" id="mycgv_contents">

                    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/giftstore/giftstore.css" />
                    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/common/moment.min.js"></script>

                    <script type="text/javascript">
                        //<![CDATA[
                        (function ($) {
                            $(function () {
                                $('#period_wrap').datePeriod({
                                    'start': $('#startdate'),
                                    'end': $('#enddate'),
                                    'data': [
                                        { 'title': '1개월', 'data-period': 1, 'data-type': 'm' },
                                        { 'title': '3개월', 'data-period': 3, 'data-type': 'm' },
                                        { 'title': '직접/입력', 'data-period': 3, 'data-type': 'm' }
                                    ]
                                });

                                $('.tps-period-gray .round[data-type="' + 0 + '"]').addClass('on').siblings('button').removeClass('on').removeAttr('title');
                                $('.tps-search-gray .round[data-type="' + 0 + '"]').addClass('on').siblings('button').removeClass('on').removeAttr('title');

                                $('#btn_search').on('click', function () {
                                    var data = $('#tps-search-type').find('.on').data('type');
                                    var status = $('#tps-search-status').find('.on').data('type');
                                    var startDate = $("#startdate").val();
                                    var endDate = $("#enddate").val();
                                    var firstDate = '2014-01-03';
                                    if (startDate > endDate) {
                                        alert("조회기간을 확인해주세요.");
                                        return;
                                    }
                                    if (moment(endDate).diff(moment(moment(endDate).add(-3, 'months').format('YYYY-MM-DD')), 'asMilliseconds') < moment(endDate).diff(moment(startDate), 'asMilliseconds')) {
                                        alert("최대 3개월까지만 조회가능합니다.");
                                        return false;
                                    }
                                    if (firstDate > startDate) {
                                        alert("2014년 1월 3일 이후부터 조회가능합니다.");
                                        return false;
                                    }
                                    location.href = "./default.aspx?type=" + data + "&status=" + status + "&startdate=" + $("#startdate").val() + "&enddate=" + $("#enddate").val();
                                });

                                $('.tps-period-gray .round').on('click', function () {
                                    var $this = $(this);
                                    $this.attr('title', '현재 선택됨');
                                    $this.addClass('on').siblings('button').removeClass('on').removeAttr('title');
                                    return false;
                                });

                                $('.tps-search-gray .round').on('click', function () {
                                    var $this = $(this);
                                    $this.attr('title', '현재 선택됨');
                                    $this.addClass('on').siblings('button').removeClass('on').removeAttr('title');
                                    return false;
                                });

                                //환불신청팝업
                                $('.btn-close').on('click', function () {
                                    $('.refund').hide();
                                });
                            });
                        })(jQuery);

                        function number_filter(str_value){
                            var tmp = str_value.replace(/[^0-9]/gi, "");
                            return tmp;
                        }

                        function fnRenewalExpiry(n, u) {
                            var params = { number: n , sender: u };
                            jQuery.ajax({
                                type: 'POST',
                                url: "/user/mycgv/popcorn-store/default.aspx/SetRenewalExpiry",
                                data: "{ requestData: '" + JSON.stringify(params) + "'}",
                                dataType: 'json',
                                contentType: 'application/json',
                                success: function (data) {
                                    if (data.d.ResultCode == "00000") {
                                        alert("유효기간이 정상적으로 연장되었습니다.");
                                        window.location.reload();
                                    } else {
                                        if (data.d.ResultCode == "99997") {
                                            app.goLogin();
                                        }
                                        else {
                                            alert(data.d.ResultMessage);
                                        }
                                    }
                                },
                                error: function (xhr, status, error) {
                                    alert(error + "\n" + status + "\n" + xhr.responseText);
                                }
                            });
                        }

                        // 기프트콘 환불신청 popup
                        function fnRefundGiftcon(n) {

                            $('.refund').hide();
                            $('#refund-information').empty();
                            var params = { number: n };
                            jQuery.ajax({
                                type: 'POST',
                                url: "/user/mycgv/popcorn-store/default.aspx/GetRefundPopup",
                                data: "{ requestData: '" + JSON.stringify(params) + "'}",
                                dataType: 'json',
                                contentType: 'application/json',
                                success: function (data) {
                                    if (data.d.ResultCode == "99997") {
                                        app.goLogin();
                                    }
                                    else {
                                        $('#refund-information').empty();
                                        $('#refund-information').append(data.d.ResultHtml);
                                        fnRefundPopup();
                                    }
                                },
                                error: function (xhr, status, error) {
                                    alert(error + "\n" + status + "\n" + xhr.responseText);
                                }
                            });
                        };

                        // 기프트콘 환불신청 popup
                        function fnRefundPopup() {
                            $('.refund').show();
                            $('.refund').find('input[type="checkbox"]').off('change').on({
                                change: function (e) {
                                    var _target = e.target;
                                    var $AllChecker = $('.com_all_checker')
                                    var isAllChecker = $AllChecker.is(':checked');
                                    if ($(_target).hasClass('com_all_checker')) {
                                        $('.refund').find('.com_all_particle_checker').prop('checked', isAllChecker);
                                    } else {
                                        var _isAllParticleCheck = true;

                                        $('.refund').find('.com_all_particle_checker').each(function (idx) {
                                            _isAllParticleCheck *= $(this).is(':checked');
                                        });
                                        $AllChecker.prop('checked', _isAllParticleCheck);
                                    }
                                }
                            });
                        };

                        function fnRefundAcct(n) {
                            var regExp = /^[0-9]*$/;
                            var aNumber = ($("#txtAccountNumber").val()).trim().toString();
                            var sBankCode = $("#bankSelect option:selected").val();
                            var sBankName = $("#bankSelect option:selected").text();

                            if ($("#check00").prop("checked") == false) {
                                alert("약관 동의 후 환불신청이 가능 합니다.");
                                return false;
                            }

                            if (typeof sBankCode == "undefined") {
                                alert("은행을 선택하세요.");
                                return false;
                            }

                            if (aNumber.length < 10) {
                                alert("계좌번호를 입력해 주세요.");
                                $("txtAccountNumber").focus();
                                return false;
                            }

                            if (!regExp.test(aNumber)) {
                                alert("계좌번호를 확인하세요.");
                                $("txtAccountNumber").focus();
                                return false;
                            }

                            var params = {
                                bankCode: sBankCode,
                                bankName: sBankName,
                                accountNumber: aNumber,
                                number: n
                            };

                            fnSetAccountRequest().then(function (data) {
                                if (data != null) {
                                    if (data.d.CJSResultCode === "0000") {
                                        $.ajax({
                                            type: 'POST',
                                            url: '/user/mycgv/popcorn-store/default.aspx/SetAccountRequest',
                                            data: "{ requestData: '" + JSON.stringify(params) + "'}",
                                            dataType: 'json',
                                            contentType: 'application/json',
                                            success: function (data) {
                                                if (data.d.ResultCode == "00000") {
                                                    alert("환불신청이 완료되었습니다.");
                                                    $('.refund').hide();
                                                    $('#refund-information').empty();
                                                    window.location.reload();
                                                } else {
                                                    if (data.d.ResultCode == "99997") {
                                                        app.goLogin();
                                                    }
                                                    else {
                                                        alert(data.d.ResultMessage);
                                                    }
                                                }
                                            },
                                            error: function (xhr, status, error) {
                                                alert(error + "\n" + status + "\n" + xhr.responseText);
                                            }
                                        });
                                    }
                                    else {
                                        if (data.d.CJSResultCode == "99997") {
                                            app.goLogin();
                                        }
                                        else {
                                            alert(data.d.CJSResultMessage);
                                        }
                                    }
                                }
                            });
                        }

                        function fnSetAccountRequest() {
                            var aNumber = ($("#txtAccountNumber").val()).trim().toString();
                            var sBankCode = $("#bankSelect option:selected").val();

                            var params = {
                                bankCode: sBankCode,
                                accountNumber: aNumber
                            };

                            var response = $.ajax({
                                type: "POST",
                                url: "/user/mycgv/popcorn-store/default.aspx/GetAccountCheck",
                                data: "{requestData: '" + JSON.stringify(params) + "'}",
                                dataType: "JSON",
                                contentType: "application/json"
                            });

                            return response;
                        };
                        //]]>
                    </script>
                    <div class="tit-mycgv"><h3>내 기프트콘</h3></div>
                    <div class="set-btn" style="height: 20px"><a href="giftcon-register.aspx" class="round inblack"><span>기프트콘 등록</span></a></div>
                    <div class="tit-mycgv"><h4>CGV 기프트콘 내역</h4></div>
                    <form id="form">
                        <!-- S 조회내용& 조회기간 -->
                        <div class="sect-use-expense">
                            <div class="box-polaroid box-polaroid_tps">
                                <div class="box-inner tps-search-gray">
                                    <strong class="period">유형</strong>
                                    <span id="tps-search-status">
						<button data-type="0" class="round gray"><span>전체</span></button>
						<button data-type="2" class="round gray"><span>영화관람권</span></button>
						<button data-type="1" class="round gray"><span>매점상품</span></button>
					</span>
                                </div>
                                <div class="box-inner tps-period-gray">
                                    <strong class="period">조회내용</strong>
                                    <span id="tps-search-type">
						<button data-type="0" class="round gray"><span>사용가능</span></button>
						<button data-type="1" class="round gray"><span>사용완료</span></button>
						<button data-type="2" class="round gray"><span>기간만료</span></button>
						<button data-type="3" class="round gray"><span>취소/환불</span></button>
					</span>
                                </div>
                                <div class="box-inner">
                                    <strong class="period">조회기간</strong>
                                    <span id="period_wrap"></span>
                                    <p>
                                        <label for="startdate">시작일 입력</label><input type="text" id="startdate" name="startdate" value="2022-01-13" datepicker="datepicker" /> ~
                                        <label for="enddate">종료일 입력</label><input type="text" id="enddate" name="enddate" value="2022-02-13" datepicker="datepicker" />
                                        <button type="button" id="btn_search" class="round inblack"><span>조회하기</span></button> <!-- type="submit" 확인요청 -->
                                    </p>
                                </div>
                            </div>
                        </div>
                        <!-- E 조회내용& 조회기간 -->

                        <!-- S 기프트콘 목록 -->
                        <div class="tbl-data">
                            <strong class="tbl-data_total_tps">0</strong>
                            <table summary="기프트콘 NO./상품명/보내신분/선물수신일/유효기간/상태/관리 표기">
                                <caption>기프트콘목록 표</caption>
                                <colgroup>
                                    <col width="14%" />
                                    <col width="27%" />
                                    <col width="10%" />
                                    <col width="13%" />
                                    <col width="11%" />
                                    <col width="10%" />
                                    <col width="15%" />
                                </colgroup>
                                <thead>
                                <tr>
                                    <th scope="col">기프트콘 NO.</th>
                                    <th scope="col">상품명</th>
                                    <th scope="col">보내신분</th>
                                    <th scope="col">선물수신일</th>
                                    <th scope="col">유효기간</th>
                                    <th scope="col">상태</th>
                                    <th scope="col">관리</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr><td colspan="7" class="nodata">사용가능한 기프트콘이 없습니다.</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- Paging -->
                        <?xml version="1.0" encoding="utf-8"?>
                        <div class="paging">
                        </div>
                        <!-- Paging -->
                    </form>

                    <!-- S 환불신청 팝업 -->
                    <div class="layer-wrap refund">
                        <div class="popwrap">
                            <h1>환불정보 입력</h1>
                            <div class="pop-contents" id="refund-information">
                            </div>
                            <button type="button" class="btn-close">CGV 기프트카드 등록 팝업 닫기</button>
                        </div>
                    </div>
                    <!-- E 환불신청 팝업 -->
                </div>

            </div>
        </div>

    <script type="text/javascript">
        //<![CDATA[
        (function ($) {
            $(function () {

                $('#go_edit_page').on('click', function () {
                    var win = window.open("/user/mycgv-popupedit-profile", "profile", "left=0,top=o,width=445,height=440,toolbar=no,scrollbars=no");
                    win.focus();
                });

                $('#btn_set_my_favorite').on('click', function () {
                    var win = window.open("/user/mycgv-favoriteTheaters", "url", "left=0,top=o,width=645,height=370,toolbar=no,scrollbars=no");
                    win.focus();
                });

                <!--MY 지난등급 이력보기 스크립트-->

                $('#view_usergrade').on('click', function () {
                    var usergrade = document.getElementById("user_grade");

                    if(usergrade.style.display=='none'){
                        usergrade.style.display = '';
                    }else(usergrade.style.display=='')
                    {
                        usergrade.style.display = '';
                    }

                });

                $('#close_usergrade').on('click', function () {
                    var usergrade = document.getElementById("user_grade");

                    if(usergrade.style.display==''){
                        usergrade.style.display = 'none';
                    }else (usergrade.style.display=='')
                    {
                        usergrade.style.display = 'none';
                    }
                });

                $('#skipPersoninfo').on('click', function () {
                    var $ctn = $('#menu');
                    $ctn.attr({
                        tabIndex: -1
                    }).focus();
                    return false;
                });
                //mycgv 메뉴스킵
                $('#skipMycgvMenu').on('click', function () {
                    var $ctn = $('#mycgv_contents');
                    $ctn.attr({
                        tabIndex: -1
                    }).focus();
                    return false;
                });

                //my cgv 상단영역 skip처리
                var isGoContainer = "True";
                if (isGoContainer == "True") {
                    location.href = location.href + "#contaniner";
                }

            });
        })(jQuery);
        //]]>
    </script>
</div>


<!--/ Contents End -->
</div>
<!-- /Contents Area -->
</div>
<div th:replace="user/fragment/footer :: footer-user"></div>
</div>
</body>
</html>